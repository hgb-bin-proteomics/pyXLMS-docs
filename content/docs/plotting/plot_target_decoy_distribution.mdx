import { Callout } from 'nextra/components'

# **Plotting Target and Decoy Distribution**


```python copy
from pyXLMS import __version__

print(f"Installed pyXLMS version: {__version__}")
```
<Callout emoji="✓">
```
    Installed pyXLMS version: 1.3.0
```
</Callout>


```python copy
from pyXLMS import parser
from pyXLMS import plotting
```

All plotting functionality is available via the `plotting` submodule. We also import the `parser` submodule here for reading result files.


```python copy
parser_result = parser.read(
    "../../data/ms_annika/XLpeplib_Beveridge_QEx-HFX_DSS_R1.pdResult",
    engine="MS Annika",
    crosslinker="DSS",
)
```
<Callout emoji="✓">
```
    Reading MS Annika CSMs...: 100%|████████████████████████████████████████████████████████████████████████████████████████████████████| 826/826 [00:00<00:00, 12467.15it/s]
    Reading MS Annika crosslinks...: 100%|██████████████████████████████████████████████████████████████████████████████████████████████| 300/300 [00:00<00:00, 18755.55it/s]
```
</Callout>

We read crosslink-spectrum-matches and crosslinks using the [generic parser](https://hgb-bin-proteomics.github.io/pyXLMS/pyXLMS.parser.html#pyXLMS.parser.read) from a single `.pdResult` file.


```python copy
fig, ax = plotting.plot_target_decoy_distribution(
    parser_result["crosslink-spectrum-matches"],
    figsize=(7.0, 4.0),
    filename_prefix="target_decoy_dist_csms",
)
```


    
![png](./plot_target_decoy_distribution_files/plot_target_decoy_distribution_6_0.png)
    


We can plot the target-decoy distribution for our crosslink-spectrum-matches by passing them as the first argument.

> [!IMPORTANT]
>
> **Please note that plotting a target-decoy distribution is only possible if all data have associated target-decoy labels, otherwise the function will raise an exception!**

The default figure size is 16 by 9 inches and does not need to be set explicitly, we just used a smaller one here for demonstration purposes. The `filename_prefix` parameter is also optional, if it is given the plot is saved four times: once without the title in `.png` and `.svg` format, and once with the title in `.png` and `.svg` format.


```python copy
fig, ax = plotting.plot_target_decoy_distribution(
    parser_result["crosslinks"],
    title="Target-Target and Decoy-Decoy Distribution",
    figsize=(7.0, 4.0),
)
```


    
![png](./plot_target_decoy_distribution_files/plot_target_decoy_distribution_8_0.png)
    


We can do the same plot for our crosslinks by passing them as the first argument instead. As a side note, you can see here that MS Annika only uses Decoy-Decoy labels for all decoy crosslinks, not matter if they are Decoy-Decoy or Target-Decoy matches. This time we also specify a title for our plot via the `title` parameter. Since we did not specify a `filename_prefix` the plot is not saved to disk. There are also other parameters that can be set to tune your plot like `colors`, you can read more about all the possible parameters here: [**docs**](https://hgb-bin-proteomics.github.io/pyXLMS/pyXLMS.plotting.html#pyXLMS.plotting.plot_target_decoy_distribution.plot_target_decoy_distribution).
